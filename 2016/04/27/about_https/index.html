<!DOCTYPE html>
<html>
    <head>
    <!-- Title -->
    
    <title>
        关于HTTPS的一些基础知识 | Ruily blog
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#039BE5">
    <meta name="author" content="Ruily Zhu">
    <meta name="description" content="Ruily&#39;s blog | Android | JAVA">
    <meta name="keywords" content="null">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Ruily blog">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://www.ruilyzhu.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="关于HTTPS的一些基础知识 | Ruily blog">
    <meta property="og:description" content="Ruily&#39;s blog | Android | JAVA">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.min.css" type="text/css">
    <!-- Config CSS -->

<!-- Theme Background -->

    <style>
        body{
            background-color: #F5F5F5
        }
		
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
		
        #scheme-Paradox .MD-burger-layer {
            background-color: #666;
        }
		
        #scheme-Paradox .material-back{
            color: #666;
        }
		
        .material-layout .material-post>.material-nav,
		.material-layout .material-index>.material-nav,
        .material-nav a,
        #scheme-Paradox .material-post_container .material-back{
            color: #666;
        }
    </style>


<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #039BE5
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #039BE5 !important
    }
    
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #00BCD4 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #039BE5 !important
    }
    
    .fab{
        background: #00BCD4 !important
    }
</style>
	<script src="/js/jquery.min.js" type="text/javascript"></script>
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css" type="text/css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head -->
    
</head>
	
	

    <body id="scheme-Isolation">

		
        <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
				<!-- Isolation Header -->
				<header class="header">
	<div class="header-wrapper">
		
		<!-- Header Copyright -->
		<div class="header-copyright">
			<div class="header-site">
				©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;Ruily blog
			</div>
			<!-- 
			I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
			It will not impact the appearance and can give developers a lot of support :)

			很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
			它不会影响美观并可以给开发者很大的支持。 :) 
			-->
			<div>
				Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a>
				<br>
				Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a>
			</div>
			
		</div>

		<!-- Header Title -->
		<span class="header-title header-item">
			<a href="/" title="Ruily blog">
				Ruily blog
			</a>
		</span>

		<p class="header-slogan header-item">
			more reading more happiness
		</p>
		
		<!-- Header Nav -->
		<nav class="header-nav header-item">

			<span class="header-nav-item">
				<a href="/" title="Home">
					<span>主页</span>
				</a>
			</span>
			
			<!-- Independent Pages -->
            

		</nav>

		<!-- Header SNS -->
		<div class="header-item header-sns_list">
    <!-- Github -->
    
    <a href="https://github.com/ruilyzhu" target="view_window">
        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
    </a>
    
    
   <!-- Email -->
    
    <a href="Mailto:ruilyforcn@gmail.com" target="view_window">
        Mail
    </a>
    



    <!-- Twitter -->
    
    
    
    <!-- Facebook -->
    
    
    
    <!-- Google + -->
    
    
    
    <!-- Weibo -->
    
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    

</div>


	</div>
</header>
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
				
                

<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">
        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	

	<!-- Isolation Post Header -->
	<!-- Post thumbnail -->
	
		<!-- Post Header Info -->
		<div class="post-header_info without-thumbnail">
			<!-- Author Avatar & Name -->
			<img src="/img/avatar.png" class="avatar-img" width="44px" height="44px" alt="Ruily Zhu's avatar">
			<span class="name-span">Ruily Zhu</span>
		</div>
	
		<!-- Null Thumbnail -->
		<div class="post_thumbnail-null">
	
	</div>

				
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
	
	
		<div class="post-content_wrapper">
			<p class="post-title">
				关于HTTPS的一些基础知识
			</p>
			<p>由于通过Http协议传输的数据都是未加密的明文传输，这样会引起第三方伪造客户端与服务端通信、篡改请求数据、获取接口数据内容，由于http传输敏感数据的不安全性，因此在http协议的基础上通过SSL/TLS对传输数据进行加密。</p>
<a id="more"></a>
<h4 id="u5173_u4E8E_u52A0_u5BC6_u548C_u7B7E_u540D_u7684_u4E00_u4E9B_u57FA_u7840_u77E5_u8BC6"><a href="#u5173_u4E8E_u52A0_u5BC6_u548C_u7B7E_u540D_u7684_u4E00_u4E9B_u57FA_u7840_u77E5_u8BC6" class="headerlink" title="关于加密和签名的一些基础知识"></a>关于加密和签名的一些基础知识</h4><h5 id="u5BC6_u94A5"><a href="#u5BC6_u94A5" class="headerlink" title="密钥"></a>密钥</h5><p>通常是一组数字或者字符串</p>
<h5 id="u975E_u5BF9_u79F0_u52A0_u5BC6_u7B97_u6CD5"><a href="#u975E_u5BF9_u79F0_u52A0_u5BC6_u7B97_u6CD5" class="headerlink" title="非对称加密算法"></a>非对称加密算法</h5><p>指的是加密和解密采用不同的密钥的算法如RSA，DSA/DSS。RSA算法包括公钥和私钥，公钥加密的内容只能<br>由私钥解密，私钥加密的内容只能由公钥解密。公钥是公开的，私钥是私有的。</p>
<h5 id="u5BF9_u79F0_u52A0_u5BC6_u7B97_u6CD5"><a href="#u5BF9_u79F0_u52A0_u5BC6_u7B97_u6CD5" class="headerlink" title="对称加密算法"></a>对称加密算法</h5><p>指的是加密解密采用相同的密钥如AES、RC4、3DES，加解密速度比非对称快。</p>
<h5 id="HASH_u7B97_u6CD5"><a href="#HASH_u7B97_u6CD5" class="headerlink" title="HASH算法"></a>HASH算法</h5><p>针对通信内容的hash值的算法如MD5、SHA1、SHA256，用于确保内容的完整性</p>
<h5 id="u7B7E_u540D"><a href="#u7B7E_u540D" class="headerlink" title="签名"></a>签名</h5><p>通过Hash算法计算消息的Hash值并使用签名算法加密和消息一起发出去，接收端收到消息后在通过相同的hash算法计算hash值然后解密传过来的Hash值如果和计算的Hash值一致则说明消息没有被修改过。</p>
<h4 id="u6570_u5B57_u8BC1_u4E66"><a href="#u6570_u5B57_u8BC1_u4E66" class="headerlink" title="数字证书"></a>数字证书</h4><p>https需要证书去验证服务器的合法性，也有的安全性比较高的应用采用双向证书认证。Https证书分为CA机构颁发的证书以及自签名的证书也就是自己生成的证书，12306网站就是自签名证书。<br>证书内容大概包括一下几个主要的内容:</p>
<ul>
<li>Issuer证书的颁发机构如CA</li>
<li>公钥，一般用于对消息加密</li>
<li>Valid from/to 有效期</li>
<li>Subject 证书持有人</li>
<li>Signature algorithm 签名使用的算法</li>
<li>指纹以及指纹算法(hash算法) 被证书机构的私钥通过上面的签名算法加密过的值</li>
</ul>
<h4 id="u8BC1_u4E66_u7684_u9A8C_u8BC1_u8FC7_u7A0B"><a href="#u8BC1_u4E66_u7684_u9A8C_u8BC1_u8FC7_u7A0B" class="headerlink" title="证书的验证过程"></a>证书的验证过程</h4><p>操作系统里一般已经安装了权威证书颁发机构的数字证书，这个证书里面有这个机构的公钥，而它自己持有私钥，当客户端获取到服务端的数字证书的时候为了验证完整性合法性，读取服务端证书的颁发机构名如CA，找到操作系统里对应颁发机构CA的数字证书的公钥，服务端证书里面的指纹以及指纹算法就是CA使用它自己的数字证书私钥使用签名算法加密的，私钥加密的数据可以使用公钥解密，因此通过CA证书的公钥解密得到指纹以及指纹算法，指纹算法是一种hash算法，指纹是证书颁发机构CA通过指纹算法计算的hash值，客户端通过指纹算法计算数字证书的hash值与CA计算的hash对比如果一样则证书完整。</p>
<h4 id="HTTPS_u5DE5_u4F5C_u539F_u7406"><a href="#HTTPS_u5DE5_u4F5C_u539F_u7406" class="headerlink" title="HTTPS工作原理"></a>HTTPS工作原理</h4><p>Https在传输数据之前与服务器进行一次握手首先告诉服务器我这边支持SSL的版本、可以使用的加密方法，你服务器把证书发过来我客户端来验验，然后服务器回应奥你这个SSL版本我支持，加密算法我们就用XXX，证书信息也给你，客户端收到回应后验了验证书，恩没问题，奥用这个加密算法，成！随后告诉服务器那咱既然商量好了 我客户端下面发的数据就用我们约定好的算法加密，你到时候解密就成了，具体如下。</p>
<h5 id="u5BA2_u6237_u7AEF"><a href="#u5BA2_u6237_u7AEF" class="headerlink" title="客户端"></a>客户端</h5><ul>
<li>生成随机数A</li>
<li>支持的SSL/TLS版本号</li>
<li>支持的加密算法(对称、非对称)、Hash算法</li>
</ul>
<h5 id="u670D_u52A1_u5668"><a href="#u670D_u52A1_u5668" class="headerlink" title="服务器"></a>服务器</h5><ul>
<li>确认SSL/TLS版本</li>
<li>生成随机数B</li>
<li>确认加密算法、Hash算法</li>
<li>服务器证书</li>
</ul>
<h5 id="u5BA2_u6237_u7AEF-1"><a href="#u5BA2_u6237_u7AEF-1" class="headerlink" title="客户端"></a>客户端</h5><ul>
<li>验证证书</li>
<li>获取随机数B，生成随机数C，使用证书里的公钥加密C，使用约定好的HASH算法计算握手信息并加密</li>
<li>客户端握手阶段结束，以后的信息将按约定好的规则加密发送</li>
</ul>
<h5 id="u670D_u52A1_u5668-1"><a href="#u670D_u52A1_u5668-1" class="headerlink" title="服务器"></a>服务器</h5><ul>
<li>使用自己的私钥解密出密码C，解密客户端发送的握手信息验证Hash值，这个时候服务端客户端共同拥有这三个随机数，这三个随机数就是正式通信使用的密钥，因为服务端和客户端使用同一密钥加解密，所以使用的算法是对称算法优点是速度快。</li>
<li>使用密码加密握手信息并响应给客户端告知服务器握手阶段结束，下面开始使用约定好的解密规则通信</li>
</ul>
<h5 id="u5BA2_u6237_u7AEF-2"><a href="#u5BA2_u6237_u7AEF-2" class="headerlink" title="客户端"></a>客户端</h5><p>解密并验证HASH值，握手结束，开始使用加密的数据进行http通信</p>
<h5 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h5><ul>
<li>在SSL握手的过程中总共产生了三个随机数，使用来保证密钥产生的随机性。最后也是通过这三个随机数生成一个对称密钥用于HTTP通信中对数据的加密解密、验证数据的完整性等。</li>
<li>Https中使用非对称算法加密正式通信之前随机数等数据，使用对称算法加密正式通信内容</li>
</ul>

		</div>
	
	
</div>
				
				
					<!-- Paradox Post Info -->
					
				

                <!-- Post Comments -->
                


            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/2016/06/20/as_key_tips/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/03/16/api_version/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
				
				
					<!-- Floating Action Button -->
<div class="fabs">
    <a href="#top" class="fab toTop">
        <i class="material-icons">expand_less</i>
    </a>
    
    
        <!-- Post Nav -->
        
            <a class="prev-content fab" href="/2016/06/20/as_key_tips/" title="Android Studio常用快捷键说明"><i class="material-icons">keyboard_arrow_left</i></a>
        

        
            <a class="prev-content fab" href="/2016/03/16/api_version/" title="RESTful之API版本控制"><i class="material-icons">keyboard_arrow_right</i></a>
        
    
    
    
    
    <a href="#bottom" class="fab toBottom">
        <i class="material-icons">keyboard_arrow_down</i>
    </a>
    
    <a id="prime" class="fab">
        <i class="material-icons prime-i-add">add</i>
    </a>
</div>
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/js.min.js" type="text/javascript"></script>
<script src="/js/nprogress.js" type="text/javascript"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>


	<script src="/js/smoothscroll.js" type="text/javascript"></script>


















	<script>
		$(".fabs").mouseleave(function(){
			if( $("#prime").hasClass("is-visible") )
				$("#prime").click();
		});
	</script>

            </main>
        </div>
		
    </body>
		
	
</html>
